# Render Deployment Guide

This guide will help you deploy your MERN Stack Hospital Management System to Render with PR Previews and Auto-Deploy enabled.

## 🚀 Quick Setup

1. **Push your code to GitHub** with the `render.yaml` file
2. **Connect your repository to Render**
3. **Deploy automatically** - Render will use the `render.yaml` configuration

## 📋 What's Configured

### Services
- **Backend API** (`hospital-backend`) - Node.js API server
- **Frontend** (`hospital-frontend`) - React patient interface
- **Dashboard** (`hospital-dashboard`) - React admin dashboard
- **Database** (`hospital-management-mongodb`) - MongoDB database

### Features Enabled
- ✅ **Auto-Deploy** - Automatic deployments on push to main branch
- ✅ **PR Previews** - Preview deployments for pull requests
- ✅ **Health Checks** - Backend health monitoring
- ✅ **Environment Variables** - Secure configuration management

## 🔧 Environment Variables

### Backend Environment Variables
```bash
NODE_ENV=production
MONGODB_URI=# Auto-configured from database
JWT_SECRET=# Auto-generated by Render
JWT_EXPIRE=7d
COOKIE_EXPIRE=7
CORS_ORIGIN=https://hospital-frontend.onrender.com
```

### Frontend Environment Variables
```bash
VITE_API_URL=https://hospital-backend.onrender.com
```

### Dashboard Environment Variables
```bash
VITE_API_URL=https://hospital-backend.onrender.com
```

## 📁 Project Structure
```
├── render.yaml              # Render configuration
├── backend/                 # Node.js API server
│   ├── server.js
│   ├── app.js
│   └── package.json
├── frontend/               # React patient interface
│   ├── src/
│   └── package.json
└── dashboard/              # React admin dashboard
    ├── src/
    └── package.json
```

## 🔗 Service URLs

After deployment, your services will be available at:
- **Backend API**: `https://hospital-backend.onrender.com`
- **Frontend**: `https://hospital-frontend.onrender.com`
- **Dashboard**: `https://hospital-dashboard.onrender.com`

## 🛠️ Manual Setup (if needed)

### 1. Create Database
- Go to Render Dashboard
- Create a new MongoDB database
- Note the connection string

### 2. Create Backend Service
- Type: Web Service
- Environment: Node
- Build Command: `cd backend && npm install`
- Start Command: `cd backend && npm start`
- Add environment variables

### 3. Create Frontend Service
- Type: Web Service
- Environment: Static Site
- Build Command: `cd frontend && npm install && npm run build`
- Publish Directory: `frontend/dist`

### 4. Create Dashboard Service
- Type: Web Service
- Environment: Static Site
- Build Command: `cd dashboard && npm install && npm run build`
- Publish Directory: `dashboard/dist`

## 🔍 Health Check

The backend includes a health check endpoint at `/api/v1/health` that returns:
```json
{
  "success": true,
  "message": "Server is running",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

## 🚨 Troubleshooting

### Common Issues:
1. **Build fails**: Check if all dependencies are in package.json
2. **Environment variables**: Ensure all required env vars are set in Render
3. **CORS errors**: Verify CORS_ORIGIN is set correctly
4. **Database connection**: Check MongoDB connection string

### Debug Commands:
```bash
# Check build logs
render logs --service hospital-backend

# Check environment variables
render env ls --service hospital-backend
```

## 📝 Notes

- All services use the **free plan** by default
- **Auto-deploy** is enabled for all services
- **PR Previews** are enabled for testing changes
- The `render.yaml` file handles all configuration automatically

## 🎉 Next Steps

1. Push your code to GitHub
2. Connect your repository to Render
3. Render will automatically deploy all services
4. Test your application at the provided URLs
5. Create PRs to test the preview functionality

Your hospital management system will be live with full CI/CD capabilities! 🏥✨ 